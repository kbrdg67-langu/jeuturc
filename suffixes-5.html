<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title> Conjugaison - drap & drop</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;line-height:1.4;padding:18px;background:#f7f8fb;color:#111}
  h1{font-size:20px;margin-bottom:6px}
  .instructions{background:#fff;border-left:4px solid #2b6cb0;padding:10px;margin-bottom:12px}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:20px}
  .panel{background:#fff;padding:12px;border-radius:8px;box-shadow:0 1px 0 rgba(0,0,0,0.04)}
  .pool{display:flex;flex-wrap:wrap;gap:8px}
  .pill{background:#eef2ff;border:1px solid #d6defe;padding:6px 8px;border-radius:6px;cursor:grab}
  .row{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid #eee}
  .targets{display:flex;gap:6px}
  .drop{min-width:110px;height:36px;border:2px dashed #cbd5e1;border-radius:6px;padding:4px;display:flex;align-items:center;justify-content:center;background:#fbfdff}
  .drop.filled{border-style:solid;background:#e6fffa}
  .small{font-size:13px;color:#555}
  button{background:#2b6cb0;color:#fff;padding:8px 12px;border-radius:6px;border:0;cursor:pointer}
  .ok{color:green;font-weight:700}
  .bad{color:#c53030;font-weight:700}
  .hint{font-size:13px;color:#333}
  footer{margin-top:14px;font-size:13px;color:#444}
  .flex{display:flex;gap:8px;align-items:center}
  .clear{background:#e2e8f0;color:#111}
</style>


</head>
<body>
<h1>Exercice : placer <em>radical</em> + suffixes</h1>
<div class="instructions panel">
  <div class="small"><strong>Consigne :</strong> pour chaque forme donnée, glissez les morceaux (radical / négation / temps / terminaison) dans l'ordre correct.</div>
  <div style="margin-top:6px" class="hint">Rappelez-vous : ordre général = <strong>radical + (ma/me) 'négation' + marqueur de temps (iyor / di / ecek) + suffixe personnel</strong>.</div>
</div>

  <div class="grid">
  <div class="panel">
    <h2 style="margin:0 0 8px 0">Parties à glisser</h2>
    <div class="pool" id="pool">
      <!-- radicals -->
      <div class="pill" draggable="true" data-id="anla">anla-</div>
      <div class="pill" draggable="true" data-id="gel">gel-</div>
      <div class="pill" draggable="true" data-id="yap">yap-</div>
      <div class="pill" draggable="true" data-id="konus">konuş-</div>
      <div class="pill" draggable="true" data-id="iste">iste-</div>

      <!-- négation -->
      <div class="pill" draggable="true" data-id="ma">-ma</div>
      <div class="pill" draggable="true" data-id="me">-me</div>

      <!-- temps / liaison -->
      <div class="pill" draggable="true" data-id="iyor">‑iyor</div>
      <div class="pill" draggable="true" data-id="uyor">‑uyor</div>
      <div class="pill" draggable="true" data-id="di">-di</div>
      <div class="pill" draggable="true" data-id="di/">-dı</div>
      <div class="pill" draggable="true" data-id="ti/">-tı</div>
      <div class="pill" draggable="true" data-id="ti">-ti</div>
      <div class="pill" draggable="true" data-id="tu/">-tu</div>
      <div class="pill" draggable="true" data-id="tu/">-tü</div>
      <div class="pill" draggable="true" data-id="ecek">-ecek</div>
     <div class="pill" draggable="true" data-id="acak">-acak</div>
      <div class="pill" draggable="true" data-id="yacak">-yacak</div>
      <div class="pill" draggable="true" data-id="yecek">-yecek</div>

      <!-- terminaisons -->
      <div class="pill" draggable="true" data-id="um">‑um</div>
            <div class="pill" draggable="true" data-id="im/">‑ım</div>
            <div class="pill" draggable="true" data-id="üm">‑üm</div>
            <div class="pill" draggable="true" data-id="im">‑im</div>
<div class="pill" draggable="true" data-id="sın">-sın</div>
<div class="pill" draggable="true" data-id="sin">-sin</div>
<div class="pill" draggable="true" data-id="sun">-sun</div>
      <div class="pill" draggable="true" data-id="sün">-sün</div>
<div class="pill" draggable="true" data-id="ız">-ız</div>
<div class="pill" draggable="true" data-id="iz">-iz</div>
<div class="pill" draggable="true" data-id="uz">-uz</div>
<div class="pill" draggable="true" data-id="üz">-üz</div>
      <div class="pill" draggable="true" data-id="sınız">-sınız</div>
<div class="pill" draggable="true" data-id="siniz">-siniz</div>
<div class="pill" draggable="true" data-id="sunuz">-sunuz</div>
<div class="pill" draggable="true" data-id="sünüz">-sünüz</div>
      <div class="pill" draggable="true" data-id="m">‑m</div>
      <div class="pill" draggable="true" data-id="im">‑im</div>
 <div class="pill" draggable="true" data-id="lar">-lar</div>
<div class="pill" draggable="true" data-id="ler">-ler</div>
      <div class="pill" draggable="true" data-id="y">‑y</div>
      <div class="pill" draggable="true" data-id="ye">‑ye</div>
    </div>

  <div class="panel">
    <h2 style="margin:0 0 8px 0">À compléter — glissez dans l'ordre</h2>

    <div class="small" style="margin-bottom:8px">Pour chaque ligne, déposez 1 morceaux selon le verbe (les cases vides restent lorsqu'aucun morceau n'est nécessaire).</div>

<div id="exercise">

<!-- ====================== ANLAMAK ====================== -->
<!-- Présent -->
<div class="row"><strong>Anlamak — Présent — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["anla","iyor","um"]'>Ben</div>
    <div class="drop" data-expected='["anla","iyor","sun"]'>Sen</div>
    <div class="drop" data-expected='["anla","iyor"]'>O</div>
    <div class="drop" data-expected='["anla","ıyoruz"]'>Biz</div>
    <div class="drop" data-expected='["anla","ıyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["anla","ıyorlar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Anlamak — Présent — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["anla","ma","iyor","um"]'>Ben</div>
    <div class="drop" data-expected='["anla","ma","iyor","sun"]'>Sen</div>
    <div class="drop" data-expected='["anla","ma","iyor"]'>O</div>
    <div class="drop" data-expected='["anla","ma","ıyoruz"]'>Biz</div>
    <div class="drop" data-expected='["anla","ma","ıyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["anla","ma","ıyorlar"]'>Onlar</div>
  </div>
</div>

<!-- Passé -->
<div class="row"><strong>Anlamak — Passé — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["anla","dı","m"]'>Ben</div>
    <div class="drop" data-expected='["anla","dı","n"]'>Sen</div>
    <div class="drop" data-expected='["anla","dı"]'>O</div>
    <div class="drop" data-expected='["anla","dık"]'>Biz</div>
    <div class="drop" data-expected='["anla","dınız"]'>Siz</div>
    <div class="drop" data-expected='["anla","dılar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Anlamak — Passé — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["anla","ma","dı","m"]'>Ben</div>
    <div class="drop" data-expected='["anla","ma","dı","n"]'>Sen</div>
    <div class="drop" data-expected='["anla","ma","dı"]'>O</div>
    <div class="drop" data-expected='["anla","ma","dık"]'>Biz</div>
    <div class="drop" data-expected='["anla","ma","dınız"]'>Siz</div>
    <div class="drop" data-expected='["anla","ma","dılar"]'>Onlar</div>
  </div>
</div>

<!-- Futur -->
<div class="row"><strong>Anlamak — Futur — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["anla","y","acak","ım"]'>Ben</div>
    <div class="drop" data-expected='["anla","y","acak","sın"]'>Sen</div>
    <div class="drop" data-expected='["anla","y","acak"]'>O</div>
    <div class="drop" data-expected='["anla","y","acağız"]'>Biz</div>
    <div class="drop" data-expected='["anla","y","acaksınız"]'>Siz</div>
    <div class="drop" data-expected='["anla","y","acaklar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Anlamak — Futur — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["anla","ma","y","acak","ım"]'>Ben</div>
    <div class="drop" data-expected='["anla","ma","y","acak","sın"]'>Sen</div>
    <div class="drop" data-expected='["anla","ma","y","acak"]'>O</div>
    <div class="drop" data-expected='["anla","ma","y","acağız"]'>Biz</div>
    <div class="drop" data-expected='["anla","ma","y","acaksınız"]'>Siz</div>
    <div class="drop" data-expected='["anla","ma","y","acaklar"]'>Onlar</div>
  </div>
</div>

<!-- ====================== GELMEK ====================== -->
<!-- Présent -->
<div class="row"><strong>Gelmek — Présent — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["gel","iyor","um"]'>Ben</div>
    <div class="drop" data-expected='["gel","iyor","sun"]'>Sen</div>
    <div class="drop" data-expected='["gel","iyor"]'>O</div>
    <div class="drop" data-expected='["gel","iyoruz"]'>Biz</div>
    <div class="drop" data-expected='["gel","iyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["gel","iyorlar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Gelmek — Présent — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["gel","me","iyor","um"]'>Ben</div>
    <div class="drop" data-expected='["gel","me","iyor","sun"]'>Sen</div>
    <div class="drop" data-expected='["gel","me","iyor"]'>O</div>
    <div class="drop" data-expected='["gel","me","iyoruz"]'>Biz</div>
    <div class="drop" data-expected='["gel","me","iyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["gel","me","iyorlar"]'>Onlar</div>
  </div>
</div>

<!-- Passé -->
<div class="row"><strong>Gelmek — Passé — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["gel","di","m"]'>Ben</div>
    <div class="drop" data-expected='["gel","di","n"]'>Sen</div>
    <div class="drop" data-expected='["gel","di"]'>O</div>
    <div class="drop" data-expected='["gel","dik"]'>Biz</div>
    <div class="drop" data-expected='["gel","diniz"]'>Siz</div>
    <div class="drop" data-expected='["gel","diler"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Gelmek — Passé — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["gel","me","di","m"]'>Ben</div>
    <div class="drop" data-expected='["gel","me","di","n"]'>Sen</div>
    <div class="drop" data-expected='["gel","me","di"]'>O</div>
    <div class="drop" data-expected='["gel","me","dik"]'>Biz</div>
    <div class="drop" data-expected='["gel","me","diniz"]'>Siz</div>
    <div class="drop" data-expected='["gel","me","diler"]'>Onlar</div>
  </div>
</div>

<!-- Futur -->
<div class="row"><strong>Gelmek — Futur — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["gel","ecek","im"]'>Ben</div>
    <div class="drop" data-expected='["gel","ecek","sin"]'>Sen</div>
    <div class="drop" data-expected='["gel","ecek"]'>O</div>
    <div class="drop" data-expected='["gel","ecek","iz"]'>Biz</div>
    <div class="drop" data-expected='["gel","ecek","siniz"]'>Siz</div>
    <div class="drop" data-expected='["gel","ecek","ler"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Gelmek — Futur — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["gel","me","ecek","im"]'>Ben</div>
    <div class="drop" data-expected='["gel","me","ecek","sin"]'>Sen</div>
    <div class="drop" data-expected='["gel","me","ecek"]'>O</div>
    <div class="drop" data-expected='["gel","me","ecek","iz"]'>Biz</div>
    <div class="drop" data-expected='["gel","me","ecek","siniz"]'>Siz</div>
    <div class="drop" data-expected='["gel","me","ecek","ler"]'>Onlar</div>
  </div>
</div>

<!-- ====================== YAPMAK ====================== -->
<!-- Présent -->
<div class="row"><strong>Yapmak — Présent — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["yap","ıyor","ım"]'>Ben</div>
    <div class="drop" data-expected='["yap","ıyor","sın"]'>Sen</div>
    <div class="drop" data-expected='["yap","ıyor"]'>O</div>
    <div class="drop" data-expected='["yap","ıyoruz"]'>Biz</div>
    <div class="drop" data-expected='["yap","ıyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["yap","ıyorlar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Yapmak — Présent — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["yap","ma","ıyor","ım"]'>Ben</div>
    <div class="drop" data-expected='["yap","ma","ıyor","sın"]'>Sen</div>
    <div class="drop" data-expected='["yap","ma","ıyor"]'>O</div>
    <div class="drop" data-expected='["yap","ma","ıyoruz"]'>Biz</div>
    <div class="drop" data-expected='["yap","ma","ıyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["yap","ma","ıyorlar"]'>Onlar</div>
  </div>
</div>

<!-- Passé -->
<div class="row"><strong>Yapmak — Passé — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["yap","tı","m"]'>Ben</div>
    <div class="drop" data-expected='["yap","tı","n"]'>Sen</div>
    <div class="drop" data-expected='["yap","tı"]'>O</div>
    <div class="drop" data-expected='["yap","tık"]'>Biz</div>
    <div class="drop" data-expected='["yap","tınız"]'>Siz</div>
    <div class="drop" data-expected='["yap","tılar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Yapmak — Passé — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["yap","ma","dı","m"]'>Ben</div>
    <div class="drop" data-expected='["yap","ma","dı","n"]'>Sen</div>
    <div class="drop" data-expected='["yap","ma","dı"]'>O</div>
    <div class="drop" data-expected='["yap","ma","dık"]'>Biz</div>
    <div class="drop" data-expected='["yap","ma","dınız"]'>Siz</div>
    <div class="drop" data-expected='["yap","ma","dılar"]'>Onlar</div>
  </div>
</div>

<!-- Futur -->
<div class="row"><strong>Yapmak — Futur — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["yap","acak","ım"]'>Ben</div>
    <div class="drop" data-expected='["yap","acak","sın"]'>Sen</div>
    <div class="drop" data-expected='["yap","acak"]'>O</div>
    <div class="drop" data-expected='["yap","acağız"]'>Biz</div>
    <div class="drop" data-expected='["yap","acaksınız"]'>Siz</div>
    <div class="drop" data-expected='["yap","acaklar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Yapmak — Futur — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["yap","ma","acak","ım"]'>Ben</div>
    <div class="drop" data-expected='["yap","ma","acak","sın"]'>Sen</div>
    <div class="drop" data-expected='["yap","ma","acak"]'>O</div>
    <div class="drop" data-expected='["yap","ma","acağız"]'>Biz</div>
    <div class="drop" data-expected='["yap","ma","acaksınız"]'>Siz</div>
    <div class="drop" data-expected='["yap","ma","acaklar"]'>Onlar</div>
  </div>
</div>

<!-- ====================== KONUSMAK ====================== -->
<!-- Présent -->
<div class="row"><strong>Konuşmak — Présent — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["konuş","uyor","um"]'>Ben</div>
    <div class="drop" data-expected='["konuş","uyor","sun"]'>Sen</div>
    <div class="drop" data-expected='["konuş","uyor"]'>O</div>
    <div class="drop" data-expected='["konuş","uyoruz"]'>Biz</div>
    <div class="drop" data-expected='["konuş","uyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["konuş","uyorlar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Konuşmak — Présent — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["konuş","ma","uyor","um"]'>Ben</div>
    <div class="drop" data-expected='["konuş","ma","uyor","sun"]'>Sen</div>
    <div class="drop" data-expected='["konuş","ma","uyor"]'>O</div>
    <div class="drop" data-expected='["konuş","ma","uyoruz"]'>Biz</div>
    <div class="drop" data-expected='["konuş","ma","uyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["konuş","ma","uyorlar"]'>Onlar</div>
  </div>
</div>

<!-- Passé -->
<div class="row"><strong>Konuşmak — Passé — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["konuş","tu","m"]'>Ben</div>
    <div class="drop" data-expected='["konuş","tu","n"]'>Sen</div>
    <div class="drop" data-expected='["konuş","tu"]'>O</div>
    <div class="drop" data-expected='["konuş","tuk"]'>Biz</div>
    <div class="drop" data-expected='["konuş","tunuz"]'>Siz</div>
    <div class="drop" data-expected='["konuş","tular"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Konuşmak — Passé — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["konuş","ma","dı","m"]'>Ben</div>
    <div class="drop" data-expected='["konuş","ma","dı","n"]'>Sen</div>
    <div class="drop" data-expected='["konuş","ma","dı"]'>O</div>
    <div class="drop" data-expected='["konuş","ma","dık"]'>Biz</div>
    <div class="drop" data-expected='["konuş","ma","dınız"]'>Siz</div>
    <div class="drop" data-expected='["konuş","ma","dılar"]'>Onlar</div>
  </div>
</div>

<!-- Futur -->
<div class="row"><strong>Konuşmak — Futur — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["konuş","acak","ım"]'>Ben</div>
    <div class="drop" data-expected='["konuş","acak","sın"]'>Sen</div>
    <div class="drop" data-expected='["konuş","acak"]'>O</div>
    <div class="drop" data-expected='["konuş","acağız"]'>Biz</div>
    <div class="drop" data-expected='["konuş","acaksınız"]'>Siz</div>
    <div class="drop" data-expected='["konuş","acaklar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>Konuşmak — Futur — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["konuş","ma","acak","ım"]'>Ben</div>
    <div class="drop" data-expected='["konuş","ma","acak","sın"]'>Sen</div>
    <div class="drop" data-expected='["konuş","ma","acak"]'>O</div>
    <div class="drop" data-expected='["konuş","ma","acağız"]'>Biz</div>
    <div class="drop" data-expected='["konuş","ma","acaksınız"]'>Siz</div>
    <div class="drop" data-expected='["konuş","ma","acaklar"]'>Onlar</div>
  </div>
</div>

<!-- ====================== ISTEMEK ====================== -->
<!-- Présent -->
<div class="row"><strong>İstemek — Présent — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["iste","iyor","im"]'>Ben</div>
    <div class="drop" data-expected='["iste","iyor","sin"]'>Sen</div>
    <div class="drop" data-expected='["iste","iyor"]'>O</div>
    <div class="drop" data-expected='["iste","iyoruz"]'>Biz</div>
    <div class="drop" data-expected='["iste","iyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["iste","iyorlar"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>İstemek — Présent — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["iste","me","iyor","im"]'>Ben</div>
    <div class="drop" data-expected='["iste","me","iyor","sin"]'>Sen</div>
    <div class="drop" data-expected='["iste","me","iyor"]'>O</div>
    <div class="drop" data-expected='["iste","me","iyoruz"]'>Biz</div>
    <div class="drop" data-expected='["iste","me","iyorsunuz"]'>Siz</div>
    <div class="drop" data-expected='["iste","me","iyorlar"]'>Onlar</div>
  </div>
</div>

<!-- Passé -->
<div class="row"><strong>İstemek — Passé — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["iste","di","m"]'>Ben</div>
    <div class="drop" data-expected='["iste","di","n"]'>Sen</div>
    <div class="drop" data-expected='["iste","di"]'>O</div>
    <div class="drop" data-expected='["iste","dik"]'>Biz</div>
    <div class="drop" data-expected='["iste","diniz"]'>Siz</div>
    <div class="drop" data-expected='["iste","diler"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>İstemek — Passé — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["iste","me","di","m"]'>Ben</div>
    <div class="drop" data-expected='["iste","me","di","n"]'>Sen</div>
    <div class="drop" data-expected='["iste","me","di"]'>O</div>
    <div class="drop" data-expected='["iste","me","dik"]'>Biz</div>
    <div class="drop" data-expected='["iste","me","diniz"]'>Siz</div>
    <div class="drop" data-expected='["iste","me","diler"]'>Onlar</div>
  </div>
</div>

<!-- Futur -->
<div class="row"><strong>İstemek — Futur — Affirmatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["iste","ye","cek","im"]'>Ben</div>
    <div class="drop" data-expected='["iste","ye","cek","sin"]'>Sen</div>
    <div class="drop" data-expected='["iste","ye","cek"]'>O</div>
    <div class="drop" data-expected='["iste","ye","ceğiz"]'>Biz</div>
    <div class="drop" data-expected='["iste","ye","ceksiniz"]'>Siz</div>
    <div class="drop" data-expected='["iste","ye","cekler"]'>Onlar</div>
  </div>
</div>
<div class="row"><strong>İstemek — Futur — Négatif</strong>
  <div class="targets">
    <div class="drop" data-expected='["iste","me","ye","cek","im"]'>Ben</div>
    <div class="drop" data-expected='["iste","me","ye","cek","sin"]'>Sen</div>
    <div class="drop" data-expected='["iste","me","ye","cek"]'>O</div>
    <div class="drop" data-expected='["iste","me","ye","ceğiz"]'>Biz</div>
    <div class="drop" data-expected='["iste","me","ye","ceksiniz"]'>Siz</div>
    <div class="drop" data-expected='["iste","me","ye","cekler"]'>Onlar</div>
  </div>
</div>

</div>

  
<script>
// Drag & drop basic
let dragged = null;
const pool = document.getElementById('pool');
pool.addEventListener('dragstart', e=>{
  if(e.target && e.target.classList.contains('pill')){
    dragged = e.target;
    e.dataTransfer.setData('text/plain', e.target.dataset.id);
  }
});

document.querySelectorAll('.drop').forEach(d => {
  d.addEventListener('dragover', ev=>{ ev.preventDefault(); d.classList.add('filled'); });
  d.addEventListener('dragleave', ev=>{ d.classList.remove('filled'); });
  d.addEventListener('drop', ev=>{
    ev.preventDefault(); d.classList.remove('filled');
    const id = ev.dataTransfer.getData('text/plain');
    if(!id) return;
    // create clone
    const pill = document.querySelector('.pill[data-id="'+id+'"]').cloneNode(true);
    pill.setAttribute('draggable','true');
    pill.addEventListener('dragstart', e=>{ dragged = pill; e.dataTransfer.setData('text/plain', pill.dataset.id); });
    pill.addEventListener('dblclick', ()=>{ d.innerHTML=''; d.classList.remove('filled'); });
    d.innerHTML='';
    d.appendChild(pill);
  });
});

// allow dragging pills out of drops back to pool
pool.addEventListener('dragover', e=>e.preventDefault());
pool.addEventListener('drop', e=>{
  e.preventDefault(); const id=e.dataTransfer.getData('text/plain'); if(!id) return; const existing=document.querySelector('.pill[data-id="'+id+'"]'); if(existing) return; });

// Check function
function getDroppedIds(drop){
  if(!drop.firstChild) return [];
  // if pill contains combined pieces (we allow only one pill per drop here)
  return [drop.firstChild.dataset.id];
}

function checkAll(){
  let total = 0, correct = 0;
  document.querySelectorAll('.drop').forEach(drop =>{
    const expected = JSON.parse(drop.dataset.expected);
    total++;
    const dropped = getDroppedIds(drop);
    // if expected length > dropped length -> allow partial checks: we compare sequence starting from radical then other pieces possibly in multiple drops
    // For this exercise we expect 1 piece per drop; if no piece, it's incorrect
    if(dropped.length===0){ drop.style.outline='3px solid #e53e3e'; drop.title='vide'; }
    const ok = arraysEqual(expected, dropped) || arraysEqual(expected, dropped);
    if(ok){ drop.style.outline='3px solid #2f855a'; drop.title='ok'; correct++; }
    else { drop.style.outline='3px solid #e53e3e'; drop.title='incorrect'; }
  });
  const res = document.getElementById('result');
  res.textContent = correct + ' / ' + total + ' correct';
}

document.getElementById('check').addEventListener('click', checkAll);

document.getElementById('reset').addEventListener('click', ()=>{
  document.querySelectorAll('.drop').forEach(d=>{ d.innerHTML=''; d.style.outline='none'; d.classList.remove('filled'); });
  document.getElementById('result').textContent='';
});

function arraysEqual(a,b){
  if(a.length!==b.length) return false;
  for(let i=0;i<a.length;i++) if(a[i]!==b[i]) return false;
  return true;
}

</script>
</body>
</html>
